const decimalArr=[2,3,5,7,11,13,17,19,23,29,31,37,41,43],compositeNumberArr=[1,4,8,10,14,16,20,22,25,26,28,32,34,35,38,40,44],sosabhap=[3,6,9,12,15,18,21,24,27,30,33,36,39,42,45],sos5abhap=[5,10,15,20,25,30,35,40,45],pass="MTIzNA==",lottoArr=readTextFile(atob("L2RhdGEvbG90dG9MaXN0LnR4dA=="));let lottoList=[],negativeNumber=[],negativeManualNumber=[],includeManualNumber=[];document.addEventListener("DOMContentLoaded",()=>{drawNoteTemplateFile(),drawTextFile(),draw26WeekNumber();const e=document.querySelectorAll(".ext-count");e.forEach(e=>{e.addEventListener("click",()=>{const e=document.querySelector(".ext-count:checked").value;drawTextFile(parseInt(e))})}),negativeManualNumberExt(),includeManualNumberExt(),document.querySelector(".negative_manual").addEventListener("keyup",()=>{negativeManualNumberExt()}),document.querySelector(".include_manual").addEventListener("keyup",()=>{includeManualNumberExt()}),document.querySelector(".extraction_btn").addEventListener("click",()=>{lottoList=[],lottoExt()});let t=new bootstrap.Modal(document.getElementById("getApiModal"),{backdrop:"static",keyboard:!1,focus:!1});document.querySelector(".getAPILottoNumber").addEventListener("click",()=>{const e=getApiModal.querySelectorAll(".modal-body tbody")[0];let a=prompt("비밀번호","비밀번호를 입력해주세요!"),n=!0,l="";isNaN(a)?(n=!1,l="정상적인 비밀번호를 입력해주세요."):btoa(a)===pass?(document.querySelector(".drwNo").value="",mbStr='<tr><td colspan="4" style="text-align:center;">확인 할 회차번호를 입력 후 전송버튼을 클릭하세요.</td></tr>',e.innerHTML=mbStr,t.show()):(n=!1,l=null===a?"비밀번호 입력이 취소되었습니다.":"잘못된 비밀번호입니다."),!n&&(alert(l),t.hide())});const a=document.getElementById("numberInfoModal");a.addEventListener("show.bs.modal",e=>{let t=e.relatedTarget.getAttribute("data-type");const a=document.querySelector("#numberInfoModal .modal-dialog");"setNum"===t||"getNum"===t?(a.classList.remove("modal-md"),a.classList.add("modal-lg")):(a.classList.remove("modal-lg"),a.classList.add("modal-md"));let n="",l="",o="",r="",s=null;"getNum"===t||"setNum"===t?("setNum"===t?(l="최근 출현회차",r=e.relatedTarget.getAttribute("data-set-num"),mode="set"):"getNum"===t&&(l="당첨번호",r=e.relatedTarget.getAttribute("data-get-num"),s=e.relatedTarget.getAttribute("data-round"),mode="get"),o=l+" 정보",n=setDataNum(mode,r,l,s)):("dec"===t?(o="소수",n="<p><4개초과 출현할 확률 낮음></p>",n+="<p>"+decimalArr.toString()+"</p>"):"com"===t?(o="반복수",n="<p><4개초과 출현할 확률 낮음></p>",n+="<p>"+compositeNumberArr.toString()+"</p>"):"sos"===t?(o="3의 배수",n="<p><1~3개 포함 추천></p>",n+="<p>"+sosabhap.toString()+"</p>"):"sos5"===t&&(o="5의 배수",n="<p><0~2개 포함 추천></p>",n+="<p>"+sos5abhap.toString()+"</p>"),o+=" 목록");const i=document.querySelectorAll("#numberInfoModal .modal-title")[0];i.innerText=o;const u=document.querySelectorAll("#numberInfoModal .modal-body")[0];u.innerHTML=n});const n=document.querySelector(".drwNo");n.addEventListener("keyup",e=>{13===e.keyCode&&document.querySelector(".getNumber").click();let t=n.value.trim();!isNumber(t)&&(n.value=n.value.slice(0,-1))}),document.querySelector(".getNumber").addEventListener("click",()=>{let e=document.querySelector(".drwNo").value.trim();""===e?alert("확인 할 회차번호를 입력해 주세요."):getAPILottoNumber(e)});const l=document.querySelector(".toggle_button"),o=document.querySelector(".toggle_option");l.addEventListener("click",()=>{o.getAttribute("class").indexOf("show")>-1?(o.classList.remove("show"),o.classList.add("hide"),l.classList.remove("bi-chevron-double-up"),l.classList.add("bi-chevron-double-down")):(o.classList.remove("hide"),o.classList.add("show"),l.classList.remove("bi-chevron-double-down"),l.classList.add("bi-chevron-double-up"))});const r=document.querySelectorAll(".reset");r.forEach(e=>e.addEventListener("click",()=>{let t=e.getAttribute("data-input-name");"include_manual"===t&&(includeManualNumber=[]),"negative_manual"===t&&(negativeManualNumber=[]),document.querySelector("."+t).value=""}));const s=document.querySelector(".auto-negative");s.addEventListener("click",()=>{let e=lottoArr[0],t=recomNegativeNumberType1(e);document.querySelector(".negative_manual").value=t.toString(),negativeManualNumberExt()})});const negativeManualNumberExt=()=>{negativeManualNumber=[];let e=document.querySelector(".negative_manual").value.trim();if(!isCommaNumber(e)&&negativeManualRollback(),""!==e){let t=e.split(",");t.length>20?(alert("제외수는 20건까지 등록할 수 있습니다."),negativeManualRollback()):t.forEach(e=>{""!==e.trim()&&parseInt(e)<=45&&negativeManualNumber.push(parseInt(e))})}},includeManualNumberExt=()=>{includeManualNumber=[];let e=document.querySelector(".include_manual").value.trim();if(!isCommaNumber(e)&&includeManualRollback(),""!==e){let t=e.split(",");t.forEach(e=>{""!==e.trim()&&parseInt(e)<=45&&includeManualNumber.push(parseInt(e))})}},negativeManualRollback=()=>document.querySelector(".negative_manual").value=document.querySelector(".negative_manual").value.slice(0,-1),includeManualRollback=()=>document.querySelector(".include_manual").value=document.querySelector(".include_manual").value.slice(0,-1),lottoExt=()=>{let e=parseInt(document.querySelector(".extraction_cnt").value);for(z=0;z<e;z++){let e=[],t=[];includeManualNumber.length>0&&(e=includeManualNumber.length<=6?[...includeManualNumber]:setRandomNumber("inc",t)),includeManualNumber.length<=6&&(e=setRandomNumber("def",e)),e.sort((e,t)=>e-t),lottoList.push(e)}let t="";lottoList.length>0&&(t+="<ul>",lottoList.forEach(e=>{let a="",n="",l=[];e.forEach((e,t)=>{let o="";decimalArr.indexOf(e)>-1&&(o="dec"),compositeNumberArr.indexOf(e)>-1&&(o="com"),sosabhap.indexOf(e)>-1&&(o="sos"),sos5abhap.indexOf(e)>-1&&(o="sos5"),a+="<span",""!=o.trim()&&(a+=' class="'+o+'"'),a+=">"+e+"</span>",t>0&&(n+=","),n+=e,l.push(e)}),t+='<li class="cp" data-bs-toggle="modal" data-bs-target="#numberInfoModal" data-type="setNum" data-set-num="'+n+'">'+a+'<span class="mw80 font08">('+getACValue(l)+","+getLastNumSum(l)+","+getTotalSum(l)+")</span></li>"}),t+="</ul>"),t+='<div class="number-color-info">',t+="<ul>",t+='<li data-bs-toggle="modal" data-bs-target="#numberInfoModal" data-type="dec"><i class="bi bi-circle-fill dec"></i> 소수</li>',t+='<li data-bs-toggle="modal" data-bs-target="#numberInfoModal" data-type="com"><i class="bi bi-circle-fill com"></i> 반복수</li>',t+='<li data-bs-toggle="modal" data-bs-target="#numberInfoModal" data-type="sos"><i class="bi bi-circle-fill sos"></i> 3의 배수</li>',t+='<li data-bs-toggle="modal" data-bs-target="#numberInfoModal" data-type="sos5"><i class="bi bi-circle-fill sos5"></i> 5의 배수</li>',t+="</ul>",t+="</div>",document.querySelector(".extraction_area").innerHTML=t},setRandomNumber=(e,t)=>{for(;t.length<6;){let a=0;"inc"===e?(a=includeManualNumber[Math.floor(Math.random()*includeManualNumber.length)],t.indexOf(a)<0&&t.push(a)):(a=Math.floor(45*Math.random())+1,t.indexOf(a)<0&&negativeNumber.indexOf(a)<0&&negativeManualNumber.indexOf(a)<0&&t.push(a))}return t},draw26WeekNumber=()=>{let e=26,t="",a=[],n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];lottoArr.forEach((t,l)=>{if(l>=e)return!1;{if(l<3){let e={round:t.round,no1:parseInt(t.no1),no2:parseInt(t.no2),no3:parseInt(t.no3),no4:parseInt(t.no4),no5:parseInt(t.no5),no6:parseInt(t.no6)};a.push(e)}let e=[parseInt(t.no1),parseInt(t.no2),parseInt(t.no3),parseInt(t.no4),parseInt(t.no5),parseInt(t.no6)];e.forEach(e=>{n[e-1]=n[e-1]+1})}}),t+="<tr>",n.forEach((e,n)=>{let l="",o=n+1,r=!1,s=!1;a.forEach((e,t)=>{o!==e.no1&&o!==e.no2&&o!==e.no3&&o!==e.no4&&o!==e.no5&&o!==e.no6||(""!==l&&(l+=","),l+=t+1,r=!0)}),r&&(o+='<span style="font-size:xx-small;margin-left:4px;">'+l+"주전</span>"),n%4==0&&(t+="</tr><tr>"),0===e&&(e='<span class="win-num0-color">'+e+"</span>",s=!0),3===e&&(e='<span class="win-num3-color">'+e+"</span>",s=!0),4===e&&(e='<span class="win-num4-color">'+e+"</span>",s=!0),!s&&(e="<span>"+e+"</span>"),t+="<td>"+o+"</td>",t+="<td>"+e+"</td>"}),t+="</tr>";const l=document.querySelectorAll("#week26Modal tbody")[0];l.innerHTML=t},drawNoteTemplateFile=()=>{fetch("/template/note.json").then(e=>e.json()).then(e=>{let t="";e.forEach((e,a)=>{t+='<p class="section-mark">'+(parseInt(a)+1)+". "+e.title+"</p>",""!==e.content.trim()&&(t+="<p>"+e.content.replaceAll("\r\n","<br>")+"</p>"),""!==e.img1_path.trim()&&(t+='<div class="note-img"><img src="'+e.img1_path+'">',""!==e.img1_description.trim()&&(t+="<span>"+e.img1_description+"</span>"),t+="</div>"),""!==e.img2_path.trim()&&(t+='<div class="note-img"><img src="'+e.img2_path+'">',""!==e.img2_description.trim()&&(t+="<span>"+e.img2_description+"</span>"),t+="</div>"),""!==e.comment.trim()&&(t+="<p>"+e.comment.replaceAll("\r\n","<br>")+"</p>")}),document.querySelector(".note").innerHTML=t})},drawTextFile=(e=10)=>{let t="";lottoArr.forEach((a,n)=>{if(n>=e)return!1;{let e=[parseInt(a.no1),parseInt(a.no2),parseInt(a.no3),parseInt(a.no4),parseInt(a.no5),parseInt(a.no6)],n=a.no1+","+a.no2+","+a.no3+","+a.no4+","+a.no5+","+a.no6;t+="<tr>",t+='<td class="tCenter">'+a.round+"</td>",t+='<td class="tCenter cp" data-bs-toggle="modal" data-bs-target="#numberInfoModal" data-type="getNum" data-get-num="'+n+'" data-round="'+a.round+'">',t+=n,t+='<span class="font08">('+getACValue(e)+","+getLastNumSum(e)+","+getTotalSum(e)+")</span>",t+="</td>",t+='<td class="tCenter">'+a.bonusNo+"</td>",t+='<td class="tCenter">'+a.date+"</td>",t+="</tr>"}});const a=document.querySelectorAll(".before_number_area tbody")[0];a.innerHTML=t},setDataNum=(e,t,a="번호",n=null)=>{let l=new Array,o=null;if(n){let e=n-1,t=lottoArr.find(({round:t})=>parseInt(t)===parseInt(e));o=recomNegativeNumberType1(t)}let r=parseInt(document.querySelector(".ext-count:checked").value),s=lottoArr.slice(0,r),i="",u=[],d=[],c=[],m=[],p=[],g={},b=t.split(",");return b.length>0&&b.forEach((e,t)=>{l.push(parseInt(e)),g={no:b[t],round:null},decimalArr.indexOf(parseInt(e))>-1&&u.push(e),compositeNumberArr.indexOf(parseInt(e))>-1&&d.push(e),sosabhap.indexOf(parseInt(e))>-1&&c.push(e),sos5abhap.indexOf(parseInt(e))>-1&&m.push(e);let a="";s.forEach(t=>{let n=[t.round.toString(),t.no1.toString(),t.no2.toString(),t.no3.toString(),t.no4.toString(),t.no5.toString(),t.no6.toString()];n.indexOf(e.toString())>-1&&(""!==a.trim()&&(a+=","),a+=n[0])}),g.round=a,p.push(g)}),i+='<div class="row">',i+='<div class="col-sm-6">',i+='<div class="card">',i+='<div class="card-body">',i+='<h5 class="card-title">'+a+"</h5>",i+='<p class="card-text">',i+=t,o&&(i+="<br><br>자동제외수 : "+o),i+="</p>",i+="</div>","set"===e&&(i+='<ul class="list-group list-group-flush">',p.forEach(e=>{i+='<li class="list-group-item">',i+="<div>"+e.no+"</div> : ",i+="<span>",i+=""===e.round.trim()?"-":e.round,i+="</span>",i+="</li>"}),i+="</ul>"),i+="</div>",i+="</div>",i+='<div class="col-sm-6">',i+='<div class="card">',i+='<div class="card-body">',i+='<h5 class="card-title">참고수 정보</h5>',i+='<p class="card-text">',i+="<ul>",u.length>0&&(i+="<li>소수("+u.length+") : "+u.toString()+"</li>"),d.length>0&&(i+="<li>반복수("+d.length+") : "+d.toString()+"</li>"),c.length>0&&(i+="<li>3의 배수("+c.length+") : "+c.toString()+"</li>"),m.length>0&&(i+="<li>5의 배수("+m.length+") : "+m.toString()+"</li>"),i+="<li>AC값 : "+getACValue(l)+"</li>",i+="<li>끝수의 총합 : "+getLastNumSum(l)+"</li>",i+="<li>총합 : "+getTotalSum(l)+"</li>",i+="</ul>",i+="</p>",i+="</div>",i+="</div>",i+="</div>",i+="</div>",i};