const decimalArr=[2,3,5,7,11,13,17,19,23,29,31,37,41,43],compositeNumberArr=[1,4,8,10,14,16,20,22,25,26,28,32,34,35,38,40,44],sosabhap=[3,6,9,12,15,18,21,24,27,30,33,36,39,42,45],pass="MTIzNA==",lottoListFilePath="L2RhdGEvbG90dG9MaXN0LnR4dA==";let lottoArr=[],lottoList=[],negativeNumber=[],negativeManualNumber=[],includeManualNumber=[];document.addEventListener("DOMContentLoaded",()=>{const e=!0;e&&readTextFile(atob(lottoListFilePath),10);const t=document.querySelectorAll(".ext-count");t.forEach(e=>{e.addEventListener("click",()=>{const e=document.querySelector(".ext-count:checked").value;readTextFile(atob(lottoListFilePath),parseInt(e))})}),negativeManualNumberExt(),includeManualNumberExt(),document.querySelector(".negative_manual").addEventListener("keyup",()=>{negativeManualNumberExt()}),document.querySelector(".include_manual").addEventListener("keyup",()=>{includeManualNumberExt()}),document.querySelector(".extraction_btn").addEventListener("click",()=>{lottoList=[],lottoExt()});let l=new bootstrap.Modal(document.getElementById("getApiModal"),{backdrop:"static",keyboard:!1,focus:!1});document.querySelector(".getAPILottoNumber").addEventListener("click",()=>{const e=getApiModal.querySelectorAll(".modal-body tbody")[0];let t=prompt("비밀번호","비밀번호를 입력해주세요!"),a=!0,o="";isNaN(t)?(a=!1,o="정상적인 비밀번호를 입력해주세요."):btoa(t)===pass?(document.querySelector(".drwNo").value="",mbStr='<tr><td colspan="4" style="text-align:center;">확인 할 회차번호를 입력 후 전송버튼을 클릭하세요.</td></tr>',e.innerHTML=mbStr,l.show()):(a=!1,o=null===t?"비밀번호 입력이 취소되었습니다.":"잘못된 비밀번호입니다."),!a&&(alert(o),l.hide())});const a=document.getElementById("numberInfoModal");a.addEventListener("show.bs.modal",e=>{let t=e.relatedTarget.getAttribute("data-type");const l=document.querySelector("#numberInfoModal .modal-dialog");"setNum"===t?(l.classList.remove("modal-md"),l.classList.add("modal-lg")):(l.classList.remove("modal-lg"),l.classList.add("modal-md"));let a="",o="",n="",r="";"getNum"===t||"setNum"===t?("setNum"===t?(o="최근 출현회차",r=e.relatedTarget.getAttribute("data-set-num"),mode="set"):"getNum"===t&&(o="당첨번호",r=e.relatedTarget.getAttribute("data-get-num"),mode="get"),n=o+" 정보",a=setDataNum(mode,r,o)):("dec"===t?(n="소수",a="<p><4개초과 출현할 확률 낮음></p>",a+="<p>"+decimalArr.toString()+"</p>"):"com"===t?(n="반복수",a="<p><4개초과 출현할 확률 낮음></p>",a+="<p>"+compositeNumberArr.toString()+"</p>"):"sos"===t&&(n="3의 배수",a="<p><1~3개 포함 추천></p>",a+="<p>"+sosabhap.toString()+"</p>"),n+=" 목록");const u=document.querySelectorAll("#numberInfoModal .modal-title")[0];u.innerText=n;const d=document.querySelectorAll("#numberInfoModal .modal-body")[0];d.innerHTML=a});const o=document.querySelector(".drwNo");o.addEventListener("keyup",e=>{13===e.keyCode&&document.querySelector(".getNumber").click();let t=o.value.trim();!isNumber(t)&&(o.value=o.value.slice(0,-1))}),document.querySelector(".getNumber").addEventListener("click",()=>{let e=document.querySelector(".drwNo").value.trim();""===e?alert("확인 할 회차번호를 입력해 주세요."):getAPILottoNumber(e)});const n=document.querySelector(".toggle_button"),r=document.querySelector(".toggle_option");n.addEventListener("click",()=>{r.getAttribute("class").indexOf("show")>-1?(r.classList.remove("show"),r.classList.add("hide"),n.classList.remove("bi-chevron-double-up"),n.classList.add("bi-chevron-double-down")):(r.classList.remove("hide"),r.classList.add("show"),n.classList.remove("bi-chevron-double-down"),n.classList.add("bi-chevron-double-up"))});const u=document.querySelectorAll(".reset");u.forEach(e=>e.addEventListener("click",()=>{let t=e.getAttribute("data-input-name");"include_manual"===t&&(includeManualNumber=[]),document.querySelector("."+t).value=""}))});const negativeManualNumberExt=()=>{negativeManualNumber=[];let e=document.querySelector(".negative_manual").value.trim();if(!isCommaNumber(e)&&negativeManualRollback(),""!==e){let t=e.split(",");t.length>10?(alert("제외수는 10건까지 등록할 수 있습니다."),negativeManualRollback()):t.forEach(e=>{""!==e.trim()&&parseInt(e)<=45&&negativeManualNumber.push(parseInt(e))})}},includeManualNumberExt=()=>{includeManualNumber=[];let e=document.querySelector(".include_manual").value.trim();if(!isCommaNumber(e)&&includeManualRollback(),""!==e){let t=e.split(",");t.forEach(e=>{""!==e.trim()&&parseInt(e)<=45&&includeManualNumber.push(parseInt(e))})}},negativeManualRollback=()=>document.querySelector(".negative_manual").value=document.querySelector(".negative_manual").value.slice(0,-1),includeManualRollback=()=>document.querySelector(".include_manual").value=document.querySelector(".include_manual").value.slice(0,-1),lottoExt=()=>{let e=parseInt(document.querySelector(".extraction_cnt").value);for(z=0;z<e;z++){let e=[],t=[],l=0;if(includeManualNumber.length>0)if(includeManualNumber.length<=6)e=[...includeManualNumber];else{for(;t.length<6;)l=includeManualNumber[Math.floor(Math.random()*includeManualNumber.length)],t.indexOf(l)<0&&t.push(l);e=t}if(includeManualNumber.length<=6)for(;e.length<6;){let t=Math.floor(45*Math.random())+1;e.indexOf(t)<0&&negativeNumber.indexOf(t)<0&&negativeManualNumber.indexOf(t)<0&&e.push(t)}e.sort(function(e,t){return e-t}),lottoList.push(e)}let t="";lottoList.length>0&&(t+="<ul>",lottoList.forEach(e=>{let l="",a="";e.forEach((e,t)=>{let o="";decimalArr.indexOf(e)>-1&&(o="dec"),compositeNumberArr.indexOf(e)>-1&&(o="com"),sosabhap.indexOf(e)>-1&&(o="sos"),l+="<span",""!=o.trim()&&(l+=' class="'+o+'"'),l+=">"+e+"</span>",t>0&&(a+=","),a+=e}),t+='<li class="cp" data-bs-toggle="modal" data-bs-target="#numberInfoModal" data-type="setNum" data-set-num="'+a+'">'+l+"</li>"}),t+="</ul>"),t+='<div class="number-color-info">',t+="<ul>",t+='<li data-bs-toggle="modal" data-bs-target="#numberInfoModal" data-type="dec"><i class="bi bi-circle-fill" style="color:#ca520c;"></i> 소수</li>',t+='<li data-bs-toggle="modal" data-bs-target="#numberInfoModal" data-type="com"><i class="bi bi-circle-fill" style="color:#9d3eaa;"></i> 반복수</li>',t+='<li data-bs-toggle="modal" data-bs-target="#numberInfoModal" data-type="sos"><i class="bi bi-circle-fill" style="color:#439cbe;"></i> 3의 배수</li>',t+="</ul>",t+="</div>",document.querySelector(".extraction_area").innerHTML=t},setDataNum=(e,t,l="번호")=>{let a=parseInt(document.querySelector(".ext-count:checked").value),o=lottoArr.slice(0,a),n="",r=[],u=[],d=[],i=[],c={},s=t.split(",");return s.length>0&&s.forEach((e,t)=>{c={no:s[t],round:null},decimalArr.indexOf(parseInt(e))>-1&&r.push(e),compositeNumberArr.indexOf(parseInt(e))>-1&&u.push(e),sosabhap.indexOf(parseInt(e))>-1&&d.push(e);let l="";o.forEach(t=>{let a=[t.round.toString(),t.no1.toString(),t.no2.toString(),t.no3.toString(),t.no4.toString(),t.no5.toString(),t.no6.toString()];a.indexOf(e.toString())>-1&&(""!==l.trim()&&(l+=","),l+=a[0])}),c.round=l,i.push(c)}),n+='<div class="row">',n+='<div class="col-sm-6">',n+='<div class="card">',n+='<div class="card-body">',n+='<h5 class="card-title">'+l+"</h5>",n+='<p class="card-text">',n+=t,n+="</p>",n+="</div>","set"===e&&(n+='<ul class="list-group list-group-flush">',i.forEach(e=>{n+='<li class="list-group-item">',n+="<div>"+e.no+"</div> : ",n+="<span>",n+=""===e.round.trim()?"-":e.round,n+="</span>",n+="</li>"}),n+="</ul>"),n+="</div>",n+="</div>",n+='<div class="col-sm-6">',n+='<div class="card">',n+='<div class="card-body">',n+='<h5 class="card-title">참고수 정보</h5>',n+='<p class="card-text">',r.length>0&&(n+="소수("+r.length+") : "+r.toString()+"<br>"),u.length>0&&(n+="반복수("+u.length+") : "+u.toString()+"<br>"),d.length>0&&(n+="3의 배수("+d.length+") : "+d.toString()),n+="</p>",n+="</div>",n+="</div>",n+="</div>",n+="</div>",n};